{"ast":null,"code":"import Axios from 'axios';\nexport const setUser = () => {\n  const token = localStorage.getItem('userAuthToken');\n  return async (dispatch, getState) => {\n    const url = \"https://keepnotesec.herokuapp.com/api//users/account\";\n\n    try {\n      const response = await Axios({\n        method: 'post',\n        url: url,\n        data: {},\n        headers: {\n          \"x-auth\": token\n        }\n      });\n      const responseData = await response.data;\n      dispatch({\n        type: 'SET_USER',\n        payload: responseData\n      });\n    } catch (error) {\n      console.log(\"ERROR\", error);\n    }\n  };\n};\nexport const login = formData => {\n  return async (dispatch, getState) => {\n    Axios({\n      url: url,\n      method: 'POST',\n      data: formData\n    }).then(response => {\n      if (response.data.errors) {\n        console.log(\"user logged errors\", response.data.errors); // setIsLoading(false)\n        // setInvalidLogin(true)\n        // setTimeout(() => {\n        // \tsetInvalidLogin(false)\n        // }, 3000)\n      } else {\n        localStorage.setItem('userAuthToken', response.data.token); // dispatch(setUser())\n        //          setTimeout(() => {\n        // \tsetIsLoading(false)\n        // \tAuth.login()\n        //      \t    props.history.push('/contests')\n        // },3000)\n      }\n    }).catch(error => {\n      console.log(\"LOGIN CATCH ERROR\", error);\n    });\n  };\n};","map":{"version":3,"sources":["/home/s/personal/Javascript/React/contesting-engine/src/REDUX_STORE/ACTIONS/UserAction.js"],"names":["Axios","setUser","token","localStorage","getItem","dispatch","getState","url","response","method","data","headers","responseData","type","payload","error","console","log","login","formData","then","errors","setItem","catch"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAMC,OAAO,GAAG,MAAM;AAC5B,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAd;AAEA,SAAO,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AAEpC,UAAMC,GAAG,GAAG,sDAAZ;;AACA,QAAI;AACH,YAAMC,QAAQ,GAAG,MAAMR,KAAK,CAAC;AACnBS,QAAAA,MAAM,EAAE,MADW;AAEnBF,QAAAA,GAAG,EAAEA,GAFc;AAGnBG,QAAAA,IAAI,EAAE,EAHa;AAInBC,QAAAA,OAAO,EAAE;AAAC,oBAAUT;AAAX;AAJU,OAAD,CAA5B;AAOG,YAAMU,YAAY,GAAG,MAAMJ,QAAQ,CAACE,IAApC;AACAL,MAAAA,QAAQ,CAAC;AAACQ,QAAAA,IAAI,EAAE,UAAP;AAAkBC,QAAAA,OAAO,EAAEF;AAA3B,OAAD,CAAR;AACH,KAVD,CAUC,OAAMG,KAAN,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB;AACA;AACD,GAhBD;AAiBA,CApBM;AAsBP,OAAO,MAAMG,KAAK,GAAIC,QAAD,IAAc;AAClC,SAAO,OAAOd,QAAP,EAAiBC,QAAjB,KAA8B;AACpCN,IAAAA,KAAK,CAAC;AACIO,MAAAA,GAAG,EAAEA,GADT;AAEIE,MAAAA,MAAM,EAAE,MAFZ;AAGIC,MAAAA,IAAI,EAAES;AAHV,KAAD,CAAL,CAISC,IAJT,CAIeZ,QAAQ,IAAI;AACpB,UAAGA,QAAQ,CAACE,IAAT,CAAcW,MAAjB,EAAwB;AAC7BL,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCT,QAAQ,CAACE,IAAT,CAAcW,MAAhD,EAD6B,CAE7B;AACA;AACA;AACA;AACA;AACM,OAPD,MAOK;AACVlB,QAAAA,YAAY,CAACmB,OAAb,CAAqB,eAArB,EAAsCd,QAAQ,CAACE,IAAT,CAAcR,KAApD,EADU,CAGV;AACA;AACA;AACA;AACA;AACA;AACM;AACD,KAtBP,EAsBSqB,KAtBT,CAsBeR,KAAK,IAAI;AACjBC,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCF,KAAjC;AACA,KAxBP;AAyBA,GA1BD;AA2BA,CA5BM","sourcesContent":["import Axios from 'axios'\nexport const setUser = () => {\n\tconst token = localStorage.getItem('userAuthToken') \n\n\treturn async (dispatch, getState) => {\n\t\t\n\t\tconst url = \"https://keepnotesec.herokuapp.com/api//users/account\"\n\t\ttry {\n\t\t\tconst response = await Axios({\n            \tmethod: 'post',\n            \turl: url,\n            \tdata: {},\n            \theaders: {\"x-auth\": token}\n        \t})\n\n\t\t    const responseData = await response.data\n\t\t    dispatch({type: 'SET_USER',payload: responseData})\n\t\t}catch(error){\n\t\t\tconsole.log(\"ERROR\", error)\n\t\t}\n\t}\n}\n\nexport const login = (formData) => {\n\treturn async (dispatch, getState) => {\n\t\tAxios({\n            url: url,\n            method: 'POST',\n            data: formData\n        }).then (response => {\n        \tif(response.data.errors){\n\t\t\t\tconsole.log(\"user logged errors\", response.data.errors)\n\t\t\t\t// setIsLoading(false)\n\t\t\t\t// setInvalidLogin(true)\n\t\t\t\t// setTimeout(() => {\n\t\t\t\t// \tsetInvalidLogin(false)\n\t\t\t\t// }, 3000)\n\t        }else{\n\t\t\t\tlocalStorage.setItem('userAuthToken', response.data.token)\n\t\t\t\t\n\t\t\t\t// dispatch(setUser())\n\t   //          setTimeout(() => {\n\t\t\t\t// \tsetIsLoading(false)\n\t\t\t\t// \tAuth.login()\n\t   //      \t    props.history.push('/contests')\n\t\t\t\t// },3000)\n\t        }\n        }).catch(error => {\n        \tconsole.log(\"LOGIN CATCH ERROR\", error)\n        })\n\t}\n}"]},"metadata":{},"sourceType":"module"}