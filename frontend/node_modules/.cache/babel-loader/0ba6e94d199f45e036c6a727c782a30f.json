{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/s/personal/Javascript/React/contesting-engine/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/s/personal/Javascript/React/contesting-engine/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/s/personal/Javascript/React/contesting-engine/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/s/personal/Javascript/React/contesting-engine/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n\\t  display: block;\\n\\t  margin: 0 auto;\\n\\t  color: yellow;\\n\\t\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useContext,useState}from'react';import PulseLoader from\"react-spinners/PulseLoader\";import{css}from\"@emotion/core\";import{connect}from'react-redux';import{useDispatch}from'react-redux';import{VALIDATOR_REQUIRE,VALIDATOR_EMAIL,VALIDATOR_MIN}from'../../UTIL/validators';import{useForm}from'../../CUSTOM_HOOKS/formHook';import Card from'../../UI/Card';import Button from'../../UI/Button';import Input from'../../UI/Input';import classes from'../../CSS/Auth.module.css';// actions\nimport{login,signup}from'../../REDUX_STORE/ACTIONS/UserAction';import{AuthContext}from'../../CONTEXTS/AuthContext';var Auth=function Auth(props){var Auth=useContext(AuthContext);var override=css(_templateObject());var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isInvalidLogin=_useState4[0],setInvalidLogin=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isLoginMode=_useState8[0],setIsLoginMode=_useState8[1];var _useForm=useForm({email:{value:'',isValid:false},password:{value:'',isValid:false}},false),_useForm2=_slicedToArray(_useForm,2),formState=_useForm2[0],inputHandler=_useForm2[1];var sumbmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData,email,password,_email,_password;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();formData={email:formState.inputs.email.value,password:formState.inputs.password.value};_context.prev=2;setIsLoading(true);if(!isLoginMode){_context.next=12;break;}email=formData.email,password=formData.password;_context.next=8;return dispatch(login(email,password));case 8:setMessage('Successfully SignedIn !!!');setTimeout(function(){setIsLoading(false);setInvalidLogin(false);Auth.login();props.history.push('/contests');},1000);_context.next=17;break;case 12:_email=formData.email,_password=formData.password;_context.next=15;return dispatch(signup(_email,_password));case 15:setMessage('Successfully Registered !!!');setTimeout(function(){setIsLoading(false);setInvalidLogin(false);Auth.login();},1000);case 17:_context.next=24;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](2);setInvalidLogin(true);setMessage(_context.t0.message);setIsLoading(false);case 24:case\"end\":return _context.stop();}}},_callee,null,[[2,19]]);}));return function sumbmitHandler(_x){return _ref.apply(this,arguments);};}();var changeAuthHandler=function changeAuthHandler(){setIsLoginMode(!isLoginMode);};var authText=isLoginMode?'SignIn':'SignUp';return/*#__PURE__*/_jsx(\"div\",{className:classes.Authentication,children:/*#__PURE__*/_jsxs(Card,{cardstyles:classes.LoginForm,children:[isInvalidLogin&&/*#__PURE__*/_jsx(\"p\",{children:message}),!isInvalidLogin&&/*#__PURE__*/_jsx(\"strong\",{style:{color:'green',textDecoration:'none'},children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:sumbmitHandler,className:classes.LoginForm,children:[/*#__PURE__*/_jsx(Input,{inputtype:\"input\",type:\"text\",id:\"email\",placeholder:\"Enter email\",label:\"Email\",onInput:inputHandler,errortext:\"Please enter valid email.\",validators:[VALIDATOR_REQUIRE(),VALIDATOR_EMAIL()]}),/*#__PURE__*/_jsx(Input,{inputtype:\"input\",type:\"password\",id:\"password\",placeholder:\"Enter password\",element:\"input\",label:\"Password\",onInput:inputHandler,errortext:\"Please enter valid password.\",validators:[VALIDATOR_REQUIRE(),VALIDATOR_MIN(6)]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",size:\"Small\",disabled:!formState.formIsValid,children:isLoading?/*#__PURE__*/_jsx(PulseLoader,{color:\"white\",loading:isLoading,size:5,css:override}):authText})]}),/*#__PURE__*/_jsx(\"strong\",{onClick:changeAuthHandler,children:isLoginMode?'Are you new User?':'Are you registered already?'})]})});};var mapStateToProps=function mapStateToProps(state){return{user:state.user};};export default connect(mapStateToProps)(Auth);","map":{"version":3,"sources":["/home/s/personal/Javascript/React/contesting-engine/src/CONTAINERS/Auth/Auth.js"],"names":["React","useContext","useState","PulseLoader","css","connect","useDispatch","VALIDATOR_REQUIRE","VALIDATOR_EMAIL","VALIDATOR_MIN","useForm","Card","Button","Input","classes","login","signup","AuthContext","Auth","props","override","dispatch","isLoading","setIsLoading","isInvalidLogin","setInvalidLogin","message","setMessage","isLoginMode","setIsLoginMode","email","value","isValid","password","formState","inputHandler","sumbmitHandler","e","preventDefault","formData","inputs","setTimeout","history","push","changeAuthHandler","authText","Authentication","LoginForm","color","textDecoration","formIsValid","mapStateToProps","state","user"],"mappings":"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","sourcesContent":["import React, {useContext, useState} from 'react'\nimport PulseLoader from \"react-spinners/PulseLoader\";\nimport { css } from \"@emotion/core\";\nimport { connect } from 'react-redux'\nimport {useDispatch} from 'react-redux'\n\nimport {VALIDATOR_REQUIRE, VALIDATOR_EMAIL, VALIDATOR_MIN} from '../../UTIL/validators'\nimport {useForm} from '../../CUSTOM_HOOKS/formHook'\n\nimport Card from '../../UI/Card'\nimport Button from '../../UI/Button'\nimport Input from '../../UI/Input'\n\nimport classes from '../../CSS/Auth.module.css'\n\n// actions\nimport {login, signup} from '../../REDUX_STORE/ACTIONS/UserAction'\n\nimport { AuthContext } from '../../CONTEXTS/AuthContext'\n\nconst Auth = (props) => {\n\tconst Auth = useContext(AuthContext)\n\n\tconst override = css`\n\t  display: block;\n\t  margin: 0 auto;\n\t  color: yellow;\n\t`;\n\n\tconst dispatch = useDispatch()\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [isInvalidLogin, setInvalidLogin] = useState(false)\n\tconst [message, setMessage] = useState()\n\tconst [isLoginMode, setIsLoginMode] = useState(true)\n\tconst [formState, inputHandler] = useForm({\n            email: {\n                value: '',\n                isValid: false\n            },\n            password: {\n                value: '',\n                isValid: false\n            }\n        }, false)\n\t\n\n\tconst sumbmitHandler = async (e) => {\n\t\te.preventDefault()\n\n\t\tlet formData = {\n            email: formState.inputs.email.value,\n            password: formState.inputs.password.value\n        }\n\n        try{\n        \tsetIsLoading(true)\n        \tif(isLoginMode){\n\t\t\t\tconst {email, password} = formData\n\t\t        await dispatch(login(email, password))\n\t\t        setMessage('Successfully SignedIn !!!')\n\t\t        setTimeout(() => {\n\t\t        \tsetIsLoading(false)\n\t\t        \tsetInvalidLogin(false)\n\t\t        \tAuth.login()\n\t\t        \tprops.history.push('/contests')\n\t\t        }, 1000)        \t\t\n        \t}else{\n\t        \tconst {email, password} = formData\n\t\t        await dispatch(signup(email, password))\n\t\t        setMessage('Successfully Registered !!!')\n\t\t        setTimeout(() => {\n\t\t        \tsetIsLoading(false)\n\t\t        \tsetInvalidLogin(false)\n\t\t        \tAuth.login()\n\t\t        }, 1000)\n        \t}\n\n        }catch(error){\n        \tsetInvalidLogin(true)\n        \tsetMessage(error.message)\n        \tsetIsLoading(false)\n        }\n\t}\n\n\tconst changeAuthHandler = () => {\n\t\tsetIsLoginMode(!isLoginMode)\n\t}\n\n\tconst authText = isLoginMode ? 'SignIn' : 'SignUp'\n\n\treturn (\n\t\t<div className = {classes.Authentication}>\n\t\t\t<Card cardstyles = {classes.LoginForm} >\n\t\t\t\t{isInvalidLogin && <p>{message}</p>}\n\t\t\t\t{!isInvalidLogin && <strong style = {{color: 'green',  textDecoration: 'none'}}>{message}</strong>}\n\t\t\t\t\n\t\t\t\t<form onSubmit = {sumbmitHandler} className = {classes.LoginForm}>\n\t\t\t\t\t<Input\n\t                \tinputtype = \"input\" \n\t                    type = \"text\"\n\t                    id = \"email\"\n\t                    placeholder = \"Enter email\"\n\t                    label = \"Email\"\n\t                    onInput = {inputHandler}\n\t                    errortext = \"Please enter valid email.\"\n\t                    validators = {[VALIDATOR_REQUIRE(), VALIDATOR_EMAIL()]}\n\t                />\n\n\t                <Input \n\t                \tinputtype = \"input\"\n\t                    type = \"password\"\n\t                    id = \"password\"\n\t                    placeholder = \"Enter password\"\n\t                    element = \"input\"\n\t                    label = \"Password\"\n\t                    onInput = {inputHandler}\n\t                    errortext = \"Please enter valid password.\"\n\t                    validators = {[VALIDATOR_REQUIRE(), VALIDATOR_MIN(6)]}\n\t                />\n\n\t                <Button \n\t                \ttype = \"submit\"\n\t                \tsize = \"Small\"\n\t                \tdisabled = {!formState.formIsValid}\n\t                >\n\t                \t{isLoading ? <PulseLoader color=\"white\" loading={isLoading} size={5} css={override}/> : authText}\n\t                </Button>\n\n\t\t\t\t</form>\n\t\t\t\t<strong onClick = {changeAuthHandler}>{isLoginMode ? 'Are you new User?' : 'Are you registered already?'}</strong>\n\t\t\t</Card>\n\t\t</div>\n\t)\n}\n\nconst mapStateToProps = (state) => {\n    return {user: state.user}\n}\n\nexport default connect(mapStateToProps)(Auth);"]},"metadata":{},"sourceType":"module"}